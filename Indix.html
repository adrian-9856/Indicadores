<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema de Indicadores - Creamos</title>
    <link rel="stylesheet" href="estilos.css">
</head>
<body>

    <!-- HEADER -->
    <header class="header">
        <div class="header-content">
            <div class="header-left">
                <h1 class="header-title">Sistema de Indicadores</h1>
                <p class="header-subtitle">Monitoreo y Evaluaci√≥n - Creamos</p>
            </div>
            <div class="header-right">
                <input type="text" id="searchInput" placeholder="üîç Buscar indicador..." class="search-input">
                <button id="btnAdmin" class="btn-admin" title="Panel de Administraci√≥n">
                    <span class="admin-icon">‚öôÔ∏è</span>
                    <span class="admin-label">Administrar</span>
                </button>
                <button id="themeToggle" class="theme-toggle" title="Cambiar tema">
                    <span class="theme-icon">üåô</span>
                </button>
            </div>
        </div>
    </header>

    <!-- NAVIGATION TABS -->
    <nav class="nav-tabs">
        <button class="tab-btn active" data-view="cards">
            <span class="tab-icon">üìá</span>
            <span class="tab-label">Tarjetas</span>
        </button>
        <button class="tab-btn" data-view="diagram">
            <span class="tab-icon">üî∑</span>
            <span class="tab-label">Diagrama</span>
        </button>
        <button class="tab-btn" data-view="list">
            <span class="tab-icon">üìã</span>
            <span class="tab-label">Lista</span>
        </button>
    </nav>

    <!-- MAIN CONTAINER -->
    <div class="main-wrapper">
        
        <!-- SIDEBAR -->
        <aside class="sidebar">
            <!-- CARGAR DATOS -->
            <div class="sidebar-card">
                <h3 class="sidebar-title">‚öôÔ∏è Configuraci√≥n</h3>
                <div class="input-group">
                    <label>URL de Google Sheets</label>
                    <input type="text" id="urlSheet" placeholder="Pega tu URL aqu√≠..." class="input-field">
                    <button id="btnCargar" class="btn-primary">Cargar Datos</button>
                </div>
            </div>

            <!-- FILTROS POR TIPO -->
            <div class="sidebar-card">
                <h3 class="sidebar-title">üéØ Filtrar por Tipo</h3>
                <div class="filter-group">
                    <label class="filter-item">
                        <input type="checkbox" value="Impacto" class="filter-checkbox filter-tipo" checked>
                        <span class="filter-icon">üí´</span>
                        <span class="filter-label">Impacto</span>
                    </label>
                    <label class="filter-item">
                        <input type="checkbox" value="Resultado" class="filter-checkbox filter-tipo" checked>
                        <span class="filter-icon">‚úÖ</span>
                        <span class="filter-label">Resultado</span>
                    </label>
                    <label class="filter-item">
                        <input type="checkbox" value="Proceso" class="filter-checkbox filter-tipo" checked>
                        <span class="filter-icon">üìä</span>
                        <span class="filter-label">Proceso</span>
                    </label>
                    <label class="filter-item">
                        <input type="checkbox" value="No especificado" class="filter-checkbox filter-tipo" checked>
                        <span class="filter-icon">‚ùì</span>
                        <span class="filter-label">No especificado</span>
                    </label>
                </div>
            </div>

            <!-- ESTAD√çSTICAS -->
            <div class="sidebar-card">
                <h3 class="sidebar-title">üìà Estad√≠sticas</h3>
                <div class="stats-grid">
                    <div class="stat-item">
                        <div class="stat-number" id="totalCount">0</div>
                        <div class="stat-label">Total Indicadores</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number" id="programasCount">0</div>
                        <div class="stat-label">Programas</div>
                    </div>
                </div>
            </div>
        </aside>

        <!-- CONTENT AREA -->
        <main class="content-area">

            <!-- BREADCRUMBS -->
            <nav class="breadcrumbs" id="breadcrumbs">
                <span class="breadcrumb-item active">üè† Inicio</span>
                <span class="breadcrumb-separator">‚Ä∫</span>
                <span class="breadcrumb-item" id="breadcrumbView">Tarjetas</span>
            </nav>

            <!-- VISTA TARJETAS -->
            <div class="view-content active" id="viewCards">
                <div class="section-header">
                    <h2 class="section-title">Indicadores por Programa</h2>
                    <div class="section-count" id="cardsCount">0 indicadores</div>
                </div>
                <div id="cardsGrid" class="cards-grid"></div>
            </div>

            <!-- VISTA DIAGRAMA -->
            <div class="view-content" id="viewDiagram">
                <div class="section-header">
                    <h2 class="section-title">Diagrama Jer√°rquico</h2>
                    <p class="section-subtitle">Haz clic en un programa para ver sus indicadores</p>
                </div>
                <div class="diagram-wrapper">
                    <div class="diagram-row">
                        <div class="diagram-node root-node" id="rootNode">
                            <div class="node-icon">üåü</div>
                            <div class="node-title">CREAMOS</div>
                            <div class="node-count" id="rootCount">0</div>
                        </div>
                    </div>
                    <div class="diagram-row" id="programasRow"></div>
                    <div class="diagram-row" id="indicadoresRow"></div>
                </div>
            </div>

            <!-- VISTA LISTA -->
            <div class="view-content" id="viewList">
                <div class="section-header">
                    <h2 class="section-title">Lista de Indicadores</h2>
                </div>
                <div id="listAccordion" class="list-accordion"></div>
            </div>

            <!-- EMPTY STATE -->
            <div class="empty-state" id="emptyState">
                <div class="empty-icon">üì•</div>
                <h3>No hay datos cargados</h3>
                <p>Carga tu archivo de Google Sheets para comenzar</p>
            </div>

        </main>
    </div>

    <!-- MODAL -->
    <div class="modal-overlay" id="modalOverlay">
        <div class="modal-container">
            <button class="modal-close" id="modalClose">&times;</button>

            <div class="modal-header">
                <h2 id="modalTitle" class="modal-title"></h2>
                <div class="modal-tags">
                    <span class="modal-tag tag-code" id="modalCode"></span>
                    <span class="modal-tag tag-type" id="modalType"></span>
                    <span class="modal-tag tag-dept" id="modalDeptTag"></span>
                </div>
            </div>

            <!-- MODAL ACTIONS -->
            <div class="modal-actions">
                <button class="btn-action" id="btnExportPDF" title="Exportar a PDF">
                    üìÑ PDF
                </button>
                <button class="btn-action" id="btnExportExcel" title="Exportar a Excel">
                    üìä Excel
                </button>
                <button class="btn-action" id="btnPrint" title="Imprimir">
                    üñ®Ô∏è Imprimir
                </button>
            </div>

            <!-- MODAL TABS -->
            <div class="modal-tabs">
                <button class="modal-tab active" data-tab="info">üìã Informaci√≥n</button>
                <button class="modal-tab" data-tab="measurement">üìè Medici√≥n</button>
                <button class="modal-tab" data-tab="data">üìä Datos M&E</button>
                <button class="modal-tab" data-tab="guidance">üìñ Gu√≠a</button>
            </div>

            <div class="modal-body">
                <!-- TAB: INFORMACI√ìN -->
                <div class="modal-tab-content active" id="tabInfo">
                    <div class="modal-field">
                        <label>C√≥digo</label>
                        <p id="modalCodigo"></p>
                    </div>
                    <div class="modal-field">
                        <label>Criterio</label>
                        <p id="modalCriterio"></p>
                    </div>
                    <div class="modal-field">
                        <label>Descripci√≥n</label>
                        <p id="modalDesc"></p>
                    </div>
                    <div class="modal-field">
                        <label>Tipo de Indicador</label>
                        <p id="modalTipo"></p>
                    </div>
                    <div class="modal-field">
                        <label>Programa</label>
                        <p id="modalPrograma"></p>
                    </div>
                    <div class="modal-field">
                        <label>Nivel de Medici√≥n</label>
                        <p id="modalNivel"></p>
                    </div>
                    <div class="modal-field">
                        <label>Herramienta</label>
                        <p id="modalHerramienta"></p>
                    </div>
                    <div class="modal-field">
                        <label>Responsable de Recolecci√≥n</label>
                        <p id="modalResponsable"></p>
                    </div>
                </div>

                <!-- TAB: MEDICI√ìN -->
                <div class="modal-tab-content" id="tabMeasurement">
                    <div class="modal-field">
                        <label>üìÖ Periodicidad / Tiempo</label>
                        <p id="modalPeriodicidad"></p>
                    </div>
                    <div class="modal-field">
                        <label>üìä Frecuencia</label>
                        <p id="modalFrecuencia"></p>
                    </div>
                    <div class="modal-field">
                        <label>üìã Desagregaci√≥n</label>
                        <p id="modalDesagregacion"></p>
                    </div>
                    <div class="modal-field">
                        <label>‚úÖ Ya recogiendo datos?</label>
                        <p id="modalRecogiendoDatos"></p>
                    </div>
                    <div class="modal-field">
                        <label>üìç Estado de Fuente</label>
                        <p id="modalEstadoFuente"></p>
                    </div>
                    <div class="modal-field">
                        <label>üîß Se necesita campo en SF?</label>
                        <p id="modalNecesitaCampoSF"></p>
                    </div>
                    <div class="modal-field">
                        <label>üì¶ Estado en SF</label>
                        <p id="modalEstadoSF"></p>
                    </div>
                </div>

                <!-- TAB: DATOS M&E -->
                <div class="modal-tab-content" id="tabData">
                    <div class="modal-field">
                        <label>üìà Hist√≥rico 2024</label>
                        <p id="modalHistorico2024" class="metric-value"></p>
                    </div>
                    <div class="modal-field">
                        <label>üéØ Target 2025</label>
                        <p id="modalTarget2025" class="metric-value"></p>
                    </div>
                    <div class="modal-field">
                        <label>üîÆ Proyecciones 2026</label>
                        <p id="modalProyecciones2026" class="metric-value"></p>
                    </div>

                    <h4 style="margin-top: 2rem; margin-bottom: 1rem; color: var(--primary); border-bottom: 2px solid var(--primary); padding-bottom: 0.5rem;">üìÖ Datos Mensuales y Trimestrales</h4>

                    <div class="metrics-grid">
                        <div class="modal-field"><label>M1</label><p id="modalM1"></p></div>
                        <div class="modal-field"><label>M2</label><p id="modalM2"></p></div>
                        <div class="modal-field"><label>M3</label><p id="modalM3"></p></div>
                        <div class="modal-field quarter"><label>Q1</label><p id="modalQ1"></p></div>

                        <div class="modal-field"><label>M4</label><p id="modalM4"></p></div>
                        <div class="modal-field"><label>M5</label><p id="modalM5"></p></div>
                        <div class="modal-field"><label>M6</label><p id="modalM6"></p></div>
                        <div class="modal-field quarter"><label>Q2</label><p id="modalQ2"></p></div>

                        <div class="modal-field"><label>M7</label><p id="modalM7"></p></div>
                        <div class="modal-field"><label>M8</label><p id="modalM8"></p></div>
                        <div class="modal-field"><label>M9</label><p id="modalM9"></p></div>
                        <div class="modal-field quarter"><label>Q3</label><p id="modalQ3"></p></div>

                        <div class="modal-field"><label>M10</label><p id="modalM10"></p></div>
                        <div class="modal-field"><label>M11</label><p id="modalM11"></p></div>
                        <div class="modal-field"><label>M12</label><p id="modalM12"></p></div>
                        <div class="modal-field quarter"><label>Q4</label><p id="modalQ4"></p></div>
                    </div>
                </div>

                <!-- TAB: GU√çA -->
                <div class="modal-tab-content" id="tabGuidance">
                    <div class="modal-field">
                        <label>‚úÖ Fuentes de Verificaci√≥n</label>
                        <p id="modalFuenteVerificacion"></p>
                    </div>
                    <div class="modal-field">
                        <label>üìù Gu√≠a de Recolecci√≥n de Datos</label>
                        <div class="guidance-box">
                            <ol>
                                <li>Identificar la fuente de datos apropiada</li>
                                <li>Definir el m√©todo de recolecci√≥n</li>
                                <li>Establecer el tama√±o de muestra necesario</li>
                                <li>Recolectar datos de manera sistem√°tica</li>
                                <li>Verificar la calidad de los datos</li>
                            </ol>
                        </div>
                    </div>
                    <div class="modal-field">
                        <label>üí° Ejemplo Pr√°ctico</label>
                        <div class="example-box">
                            <p>Si 75 de 100 participantes completaron el programa, el indicador ser√≠a: (75/100) √ó 100 = 75%</p>
                        </div>
                    </div>
                    <div class="modal-field">
                        <label>‚ö†Ô∏è Consideraciones</label>
                        <p>Asegurar que los datos sean representativos y verificables</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- TOAST NOTIFICATIONS -->
    <div id="toastContainer" class="toast-container"></div>

    <!-- LOADING OVERLAY -->
    <div id="loadingOverlay" class="loading-overlay">
        <div class="loading-spinner">
            <div class="spinner"></div>
            <p class="loading-text">Cargando datos...</p>
        </div>
    </div>

    <!-- KEYBOARD SHORTCUTS HELP -->
    <div id="shortcutsModal" class="shortcuts-modal">
        <div class="shortcuts-content">
            <button class="shortcuts-close" id="shortcutsClose">&times;</button>
            <h3>‚å®Ô∏è Atajos de Teclado</h3>
            <div class="shortcuts-grid">
                <div class="shortcut-item">
                    <kbd>Ctrl</kbd> + <kbd>K</kbd>
                    <span>B√∫squeda r√°pida</span>
                </div>
                <div class="shortcut-item">
                    <kbd>Ctrl</kbd> + <kbd>1</kbd>
                    <span>Vista Tarjetas</span>
                </div>
                <div class="shortcut-item">
                    <kbd>Ctrl</kbd> + <kbd>2</kbd>
                    <span>Vista Diagrama</span>
                </div>
                <div class="shortcut-item">
                    <kbd>Ctrl</kbd> + <kbd>3</kbd>
                    <span>Vista Lista</span>
                </div>
                <div class="shortcut-item">
                    <kbd>Ctrl</kbd> + <kbd>F</kbd>
                    <span>Ver Favoritos</span>
                </div>
                <div class="shortcut-item">
                    <kbd>Ctrl</kbd> + <kbd>D</kbd>
                    <span>Modo Oscuro</span>
                </div>
                <div class="shortcut-item">
                    <kbd>Esc</kbd>
                    <span>Cerrar Modal</span>
                </div>
                <div class="shortcut-item">
                    <kbd>?</kbd>
                    <span>Mostrar Ayuda</span>
                </div>
            </div>
        </div>
    </div>

    <!-- ADMIN MODAL -->
    <div id="adminModal" class="admin-modal-overlay">
        <div class="admin-modal-container">
            <div class="admin-modal-header">
                <h2 class="admin-modal-title">‚öôÔ∏è Panel de Administraci√≥n</h2>
                <button class="admin-modal-close" id="adminModalClose">&times;</button>
            </div>

            <!-- ADMIN TABS -->
            <div class="admin-tabs">
                <button class="admin-tab active" data-admin-tab="programs">
                    <span class="admin-tab-icon">üìö</span>
                    <span>Programas</span>
                </button>
                <button class="admin-tab" data-admin-tab="indicators">
                    <span class="admin-tab-icon">üìä</span>
                    <span>Indicadores</span>
                </button>
            </div>

            <div class="admin-modal-body">

                <!-- TAB: PROGRAMS -->
                <div class="admin-tab-content active" id="adminTabPrograms">
                    <div class="admin-section">
                        <h3 class="admin-section-title">Gesti√≥n de Programas</h3>

                        <div class="admin-form">
                            <div class="admin-form-row">
                                <div class="admin-form-group">
                                    <label for="programCodigo">C√≥digo del Programa *</label>
                                    <input type="text" id="programCodigo" placeholder="Ej: C.I" class="admin-input" required>
                                </div>
                                <div class="admin-form-group">
                                    <label for="programNombre">Nombre del Programa *</label>
                                    <input type="text" id="programNombre" placeholder="Ej: Educaci√≥n" class="admin-input" required>
                                </div>
                            </div>

                            <div class="admin-form-row">
                                <div class="admin-form-group full-width">
                                    <label for="programDescripcion">Descripci√≥n</label>
                                    <textarea id="programDescripcion" placeholder="Descripci√≥n del programa..." class="admin-textarea" rows="3"></textarea>
                                </div>
                            </div>

                            <div class="admin-form-row">
                                <div class="admin-form-group">
                                    <label for="programIcon">Icono (Emoji)</label>
                                    <input type="text" id="programIcon" placeholder="üìö" class="admin-input" maxlength="2">
                                </div>
                            </div>

                            <div class="admin-form-actions">
                                <button id="btnSaveProgram" class="btn-admin-primary">
                                    üíæ Guardar Programa
                                </button>
                                <button id="btnCancelProgram" class="btn-admin-secondary">
                                    ‚úñÔ∏è Cancelar
                                </button>
                            </div>
                        </div>

                        <div class="admin-list">
                            <h4 class="admin-list-title">Programas Existentes</h4>
                            <div id="programsList" class="admin-items-list">
                                <!-- Programs will be listed here -->
                            </div>
                        </div>
                    </div>
                </div>

                <!-- TAB: INDICATORS -->
                <div class="admin-tab-content" id="adminTabIndicators">
                    <div class="admin-section">
                        <h3 class="admin-section-title">Gesti√≥n de Indicadores</h3>

                        <div class="admin-form">
                            <div class="admin-form-row">
                                <div class="admin-form-group">
                                    <label for="indicatorCodigo">C√≥digo del Indicador *</label>
                                    <input type="text" id="indicatorCodigo" placeholder="Ej: C.I.1" class="admin-input" required>
                                </div>
                                <div class="admin-form-group">
                                    <label for="indicatorPrograma">Programa *</label>
                                    <select id="indicatorPrograma" class="admin-select" required>
                                        <option value="">Seleccionar programa...</option>
                                    </select>
                                </div>
                            </div>

                            <div class="admin-form-row">
                                <div class="admin-form-group full-width">
                                    <label for="indicatorCriterio">Criterio *</label>
                                    <input type="text" id="indicatorCriterio" placeholder="Ej: Educaci√≥n - Calidad" class="admin-input" required>
                                </div>
                            </div>

                            <div class="admin-form-row">
                                <div class="admin-form-group full-width">
                                    <label for="indicatorNombre">Nombre del Indicador *</label>
                                    <input type="text" id="indicatorNombre" placeholder="Nombre descriptivo del indicador..." class="admin-input" required>
                                </div>
                            </div>

                            <div class="admin-form-row">
                                <div class="admin-form-group full-width">
                                    <label for="indicatorDesc">Descripci√≥n</label>
                                    <textarea id="indicatorDesc" placeholder="Descripci√≥n detallada del indicador..." class="admin-textarea" rows="3"></textarea>
                                </div>
                            </div>

                            <div class="admin-form-row">
                                <div class="admin-form-group">
                                    <label for="indicatorTipo">Tipo de Indicador *</label>
                                    <select id="indicatorTipo" class="admin-select" required>
                                        <option value="">Seleccionar tipo...</option>
                                        <option value="Impacto">üí´ Impacto</option>
                                        <option value="Resultado">‚úÖ Resultado</option>
                                        <option value="Proceso">üìä Proceso</option>
                                    </select>
                                </div>
                                <div class="admin-form-group">
                                    <label for="indicatorDepto">Departamento</label>
                                    <input type="text" id="indicatorDepto" placeholder="Ej: Programas" class="admin-input">
                                </div>
                            </div>

                            <div class="admin-form-row">
                                <div class="admin-form-group">
                                    <label for="indicatorNivel">Nivel de Medici√≥n</label>
                                    <input type="text" id="indicatorNivel" placeholder="Ej: Actividad" class="admin-input">
                                </div>
                                <div class="admin-form-group">
                                    <label for="indicatorTiempo">Periodicidad</label>
                                    <input type="text" id="indicatorTiempo" placeholder="Ej: Mensual" class="admin-input">
                                </div>
                            </div>

                            <div class="admin-form-actions">
                                <button id="btnSaveIndicator" class="btn-admin-primary">
                                    üíæ Guardar Indicador
                                </button>
                                <button id="btnCancelIndicator" class="btn-admin-secondary">
                                    ‚úñÔ∏è Cancelar
                                </button>
                            </div>
                        </div>

                        <div class="admin-list">
                            <h4 class="admin-list-title">Indicadores Existentes</h4>
                            <div class="admin-filter-bar">
                                <input type="text" id="adminSearchIndicators" placeholder="üîç Buscar indicador..." class="admin-search">
                                <select id="adminFilterProgram" class="admin-select-small">
                                    <option value="">Todos los programas</option>
                                </select>
                            </div>
                            <div id="indicatorsList" class="admin-items-list">
                                <!-- Indicators will be listed here -->
                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </div>

    <script src="funciones.js"></script>
</body>
</html>